(this.webpackJsonpchora=this.webpackJsonpchora||[]).push([[0],{12:function(e,t,r){},13:function(e,t,r){},15:function(e,t,r){e.exports=r(32)},32:function(e,t,r){"use strict";r.r(t);var s=r(5),a=r.n(s),n=r(9),i=r.n(n),c=r(0),u=r(1),l=r(3),o=r(2),h=r(4),p=r(6),m=r(14),d=r.n(m),b=(r(31),r(10));r.n(b).a.defineMode("patmos",(function(e,t){var r=function(e,t){return new RegExp("^(?:"+e.join("|")+")$",t)},s=r(["add","addi","addl","sub","subi","subl","xor","xori","xorl","sl","sli","sll","sr","sri","srl","sra","srai","sral","nor","norl","shadd","shadd2","or","ori","orl","and","andi","andl","btest","btesti","cmpeq","cmpieq","cmple","cmpile","cmplt","cmpilt","cmpneq","cmpineq","cmpule","cmpiule","cmpult","cmpiult","lbc","lbl","lbm","lbs","lbuc","lbul","lbum","lbus","lhc","lhl","lhm","lhs","lhuc","lhul","lhum","lhus","lwc","lwl","lwm","lws","sbc","sbl","sbm","sbs","shc","shl","shm","shs","swc","swl","swm","sws","mul","mulu","sens","sfree","sres","sspill","sspillr","sensr","pand","por","pxor","mts","mfs","callnd","call","brnd","br","brcfnd","brcf","trap","retnd","ret","xretnd","xret","callndr","callr","brndr","brr","brcfr","brcfndr","bcopy","mov","clr","neg","not","li","nop","isodd","pmov","pnot","pset","pclr"],"i"),a=r(["r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","r10","r11","r12","r13","r14","r15","r16","r17","r18","r19","r20","r21","r22","r23","r24","r25","r26","r27","r28","r29","r30","r31","p0","p1","p2","p3","p4","p5","p6","p7","s0","s1","s2","s3","s4","s5","s6","s7","s8","s9","s10","s11","s12","s13","s14","s15","sl","sh","ss","st","srb","sro","sxb","sxo"],""),n=r([".word"],"i"),i=function(e,t){var r=e.next();return"#"===r?(e.skipToEnd(),"comment"):/\d/.test(r)?(e.eatWhile(/[\w.%]/),"number"):/[.\w_]/.test(r)?(e.eatWhile(/[\w\\\-_.]/),"variable"):null};return{startState:function(e){return{basecol:e||0,indentDepth:0,cur:i}},token:function(e,t){if(e.eatSpace())return null;var r=t.cur(e,t),i=e.current();return"variable"===r&&(n.test(i)?r="keyword":s.test(i)?r="builtin":a.test(i)&&(r="variable-2")),r}}}));var f=function(e){function t(e){var r;return Object(c.a)(this,t),(r=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={code:"",readOnly:!1,mode:"patmos",lint:!0},r.updateCode=r.updateCode.bind(Object(p.a)(r)),r}return Object(h.a)(t,e),Object(u.a)(t,[{key:"updateCode",value:function(e){this.setState({code:e}),this.props.editorUpdate(e)}},{key:"render",value:function(){var e={mode:this.state.mode,lineNumbers:!0};return a.a.createElement("div",null,a.a.createElement(d.a,{value:this.state.code,onChange:this.updateCode,options:e,autoFocus:!0}))}}]),t}(s.Component),v=f,O=(r(12),["btn button run col-2","btn button step col-2","btn button prev col-2","btn button reset col-2","btn button dump col-2"]),j=function(e,t,r,n){var i="Run all remaining instructions in queue",c="Step next instruction in queue";return e[t]?a.a.createElement(s.Fragment,null,a.a.createElement("button",{title:i,type:"button",className:O[0],onClick:r},"Run"),a.a.createElement("button",{title:c,type:"button",className:O[1],onClick:n},"Step")):(i="No instructions to run",c="No instructions to step",a.a.createElement(s.Fragment,null,a.a.createElement("button",{title:i,type:"button",className:O[0],disabled:!0},"Run"),a.a.createElement("button",{title:c,type:"button",className:O[1],disabled:!0},"Step")))},y=function(e,t,r){var n="Steps one instruction back (decrement program count)",i="Reset registers & memory and jump to first instruction";return 0===e.length?(i="No instructions run yet",n="No instructions run yet",a.a.createElement(s.Fragment,null,a.a.createElement("button",{title:n,type:"button",className:O[2],disabled:!0},"Prev"),a.a.createElement("button",{title:i,type:"button",className:O[3],disabled:!0},"Reset"))):a.a.createElement(s.Fragment,null,a.a.createElement("button",{title:n,type:"button",className:O[2],onClick:t},"Prev"),a.a.createElement("button",{title:i,type:"button",className:O[3],onClick:r},"Reset"))},k=function(e){return a.a.createElement("div",{className:"button-container"},j(e.bundles,e.pc,e.runClick,e.stepClick),y(e.history,e.prevClick,e.resetClick),a.a.createElement("button",{type:"button",className:O[4],onClick:e.dumpClick},"Dump"))},g=function(e){return"number"==typeof e?e:Number(e)},w=function(e){return"number"==typeof e?e:Number(e.match(/\d+/i)[0])},x=function(e){return e>>>0},E=function(e,t){return(e=Number(e))<0&&(e=4294967295+e+1),e.toString(16).toUpperCase().padStart(t,"0")},N=function(e,t){return"0x".concat(E(e,t))},C=(r(8),r(13),"table table-hover table-sm col-12"),S=function(e){function t(e){var r;return Object(c.a)(this,t),(r=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={pagenumber:1,pageRows:0,maxPage:0,hex:!1},r.incPage=r.incPage.bind(Object(p.a)(r)),r.decPage=r.decPage.bind(Object(p.a)(r)),r.jumpPage=r.jumpPage.bind(Object(p.a)(r)),r.updateDimensions=r.updateDimensions.bind(Object(p.a)(r)),r.toggleHex=r.toggleHex.bind(Object(p.a)(r)),r}return Object(h.a)(t,e),Object(u.a)(t,[{key:"updateDimensions",value:function(){var e=Math.floor((window.innerHeight-220)/35);this.setState({pageRows:e,maxPage:Math.ceil(2097152/(4*e))})}},{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"incPage",value:function(){this.state.pagenumber+1<=this.state.maxPage&&this.setState((function(e){return{pagenumber:e.pagenumber+1}}))}},{key:"decPage",value:function(){this.state.pagenumber>1&&this.setState((function(e){return{pagenumber:e.pagenumber-1}}))}},{key:"jumpPage",value:function(){var e=parseInt(Number(prompt("What address do you want to jump to? Both hexadecimal and decimal numbers accepted.")),10)/(4*this.state.pageRows);e<=this.state.maxPage&&this.setState((function(){return{pagenumber:Math.floor(e)+1}}))}},{key:"toggleHex",value:function(){this.setState((function(e){return{hex:!e.hex}}))}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("ul",{className:"nav nav-tabs justify-content-center"},a.a.createElement("li",{className:"nav-item"},a.a.createElement("a",{href:"#registers",className:"nav-link active","data-toggle":"tab",role:"tab"},"Registers")),a.a.createElement("li",{className:"nav-item"},a.a.createElement("a",{href:"#gm",className:"nav-link","data-toggle":"tab",role:"tab"},"Memory"))),a.a.createElement("div",{className:"tab-content"},a.a.createElement("div",{role:"tabpanel",className:"tab-pane active table-scrolling",id:"registers"},_(this.props.registers)),a.a.createElement("div",{role:"tabpanel",className:"tab-pane",id:"gm"},M(this.props.memory,this.state.pagenumber,this.state.pageRows,this.state.hex),a.a.createElement("div",null,a.a.createElement("button",{type:"button",className:"btn button page-btn col-4",onClick:this.decPage},"Prev"),a.a.createElement("button",{type:"button",className:"btn button page-btn col-4",onClick:this.incPage},"Next"),a.a.createElement("button",{type:"button",className:"btn button page-btn col-4",onClick:this.jumpPage},"Jump")),a.a.createElement("div",null,a.a.createElement("button",{type:"button",className:"btn button page-btn col-12",onClick:this.toggleHex},this.state.hex?"Change to decimal":"Change to hexadecimal")))))}}]),t}(s.Component),_=function(e){for(var t=[],r=0;r<32;r++)t.push(U("r",r,e));for(var s=0;s<16;s++)t.push(U("s",s,e));for(var n=0;n<8;n++)t.push(U("p",n,e));return t.push(a.a.createElement("tr",{key:"bottom"},a.a.createElement("th",null,"---"),a.a.createElement("td",null,"---"),a.a.createElement("td",null,"---"))),a.a.createElement("table",{className:C},a.a.createElement("thead",{className:"header-stick"},a.a.createElement("tr",{className:"header-stick"},a.a.createElement("th",{className:"header-stick",scope:"col"},"Register"),a.a.createElement("th",{className:"header-stick",scope:"col"},"Decimal"),a.a.createElement("th",{className:"header-stick",scope:"col"},"Hexadecimal"))),a.a.createElement("tbody",null,t))},M=function(e,t,r,s){var n,i=[],c=(t-1)*r*4,u=t*r*4;delete(n=Object.assign({},e)).BASE_ADDR,delete n.MAX_SIZE,delete n.TEXT_END;for(var l=c;l<u;l+=4)l<=2097152?void 0===n[l]?i.push(P(l,s)):s?i.push(D(n,l)):i.push($(n,l)):i.push(R(l));return a.a.createElement("table",{className:C},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"Address"),a.a.createElement("th",{scope:"col"},"+0"),a.a.createElement("th",{scope:"col"},"+1"),a.a.createElement("th",{scope:"col"},"+2"),a.a.createElement("th",{scope:"col"},"+3"))),a.a.createElement("tbody",null,i))},R=function(e){return a.a.createElement("tr",{key:e},a.a.createElement("td",null,"----------"),a.a.createElement("td",null,"---"),a.a.createElement("td",null,"---"),a.a.createElement("td",null,"---"),a.a.createElement("td",null,"---"))},P=function(e,t){return a.a.createElement("tr",{key:e},a.a.createElement("td",null,N(e,8)),a.a.createElement("td",null,t?"00":"0"),a.a.createElement("td",null,t?"00":"0"),a.a.createElement("td",null,t?"00":"0"),a.a.createElement("td",null,t?"00":"0"))},$=function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,N(t,8)),a.a.createElement("td",null,e["".concat(t)]),a.a.createElement("td",null,e["".concat(t+1)]),a.a.createElement("td",null,e["".concat(t+2)]),a.a.createElement("td",null,e["".concat(t+3)]))},D=function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,N(t,8)),a.a.createElement("td",null,E(e["".concat(t)],2)),a.a.createElement("td",null,E(e["".concat(t+1)],2)),a.a.createElement("td",null,E(e["".concat(t+2)],2)),a.a.createElement("td",null,E(e["".concat(t+3)],2)))},U=function(e,t,r){var s=r["".concat(e).concat(t)];return a.a.createElement("tr",{key:"".concat(e).concat(t)},a.a.createElement("td",null,e,t),a.a.createElement("td",null,s),a.a.createElement("td",null,N(s,8)))},B=S,L=function(e,t){var r=[];for(var s in t)r.push(q(t[s],e,s));return r},q=function(e,t,r){var s=0,n=t===Number(r)?"current-inst":"",i=[],c=!0,u=!1,l=void 0;try{for(var o,h=e[Symbol.iterator]();!(c=(o=h.next()).done);c=!0){var p=o.value;i.push(a.a.createElement("tr",{key:s,className:n},a.a.createElement("td",null,N(p.instruction.binary[0],8)),a.a.createElement("td",null,p.instruction.toString()),a.a.createElement("td",null,p.original))),s++}}catch(m){u=!0,l=m}finally{try{c||null==h.return||h.return()}finally{if(u)throw l}}return i},I=function(e){return a.a.createElement("div",{className:"code-container"},a.a.createElement("table",{className:"table table-hover table-sm",id:"displaycode"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"Machine Code"),a.a.createElement("th",{scope:"col"},"Basic Code"),a.a.createElement("th",{scope:"col"},"Original Code"))),a.a.createElement("tbody",null,L(e.pc,e.bundles))))},T=function(e){return a.a.createElement("div",{className:"sim"},a.a.createElement("div",{className:"col-8 col-xl-9 sim-child"},a.a.createElement(k,{history:e.history,stepClick:e.stepClick,runClick:e.runClick,prevClick:e.prevClick,resetClick:e.resetClick,dumpClick:e.dumpClick,pc:e.pc,bundles:e.bundles}),a.a.createElement(I,{pc:e.pc,bundles:e.bundles})),a.a.createElement("div",{className:"col-4 col-xl-3 reg-container sim-child"},a.a.createElement(B,{registers:e.registers,memory:e.memory})))},A=function(e){var t,r="tab",n="";if(e.error.length){for(var i in e.error)n+="fine"===e.error[i]?"":"L".concat(e.numMap[i],": ")+e.error[i]+"\n";t=function(){alert(n)},r=""}return a.a.createElement(s.Fragment,null,a.a.createElement("ul",{className:"nav nav-tabs justify-content-center"},a.a.createElement("li",{className:"nav-item"},a.a.createElement("a",{href:"#editor",className:"nav-link active","data-toggle":"tab",role:"tab"},"Editor")),a.a.createElement("li",{className:"nav-item "},a.a.createElement("a",{href:"#simulator",className:"nav-link",onClick:t,"data-toggle":r,role:"tab"},"Simulator"))),a.a.createElement("div",{className:"tab-content no-scroll"},a.a.createElement("div",{role:"tabpanel",className:"tab-pane active",id:"editor"},a.a.createElement(v,{editorUpdate:e.editorUpdate})),a.a.createElement("div",{role:"tabpanel",className:"tab-pane",id:"simulator"},a.a.createElement(T,{history:e.history,memory:e.memory,stepClick:e.stepClick,runClick:e.runClick,prevClick:e.prevClick,resetClick:e.resetClick,dumpClick:e.dumpClick,registers:e.registers,pc:e.pc,bundles:e.bundles}))))},X=function(){function e(){Object(c.a)(this,e),this.history=[],this.reg={r0:0,r1:0,r2:0,r3:0,r4:0,r5:0,r6:0,r7:0,r8:0,r9:0,r10:0,r11:0,r12:0,r13:0,r14:0,r15:0,r16:0,r17:0,r18:0,r19:0,r20:0,r21:0,r22:0,r23:0,r24:0,r25:0,r26:0,r27:0,r28:0,r29:0,r30:0,r31:0,s0:1,s1:0,s2:0,s3:0,s4:0,s5:0,s6:0,s7:0,s8:0,s9:0,s10:0,s11:0,s12:0,s13:0,s14:0,s15:0,p0:1,p1:0,p2:0,p3:0,p4:0,p5:0,p6:0,p7:0},this.mem={TEXT_END:0,BASE_ADDR:0,MAX_SIZE:2097152},this.cpu={base:0,pc:0}}return Object(u.a)(e,[{key:"reset",value:function(){this.history=[],this.mem={TEXT_END:0,BASE_ADDR:0,MAX_SIZE:2097152},this.reg={r0:0,r1:0,r2:0,r3:0,r4:0,r5:0,r6:0,r7:0,r8:0,r9:0,r10:0,r11:0,r12:0,r13:0,r14:0,r15:0,r16:0,r17:0,r18:0,r19:0,r20:0,r21:0,r22:0,r23:0,r24:0,r25:0,r26:0,r27:0,r28:0,r29:0,r30:0,r31:0,s0:1,s1:0,s2:0,s3:0,s4:0,s5:0,s6:0,s7:0,s8:0,s9:0,s10:0,s11:0,s12:0,s13:0,s14:0,s15:0,p0:1,p1:0,p2:0,p3:0,p4:0,p5:0,p6:0,p7:0},this.cpu={base:0,pc:0}}},{key:"getMemory",value:function(){return this.mem}},{key:"getReg",value:function(){return this.reg}},{key:"updateHistory",value:function(){var e,t,r;e=Object.assign({},this.reg),t=Object.assign({},this.mem),r=Object.assign({},this.cpu),this.history.push({reg:e,mem:t,cpu:r})}},{key:"rewindOnce",value:function(){var e=this.history.pop();return!!e&&(this.reg=e.reg,this.mem=e.mem,this.cpu=e.cpu,!0)}}]),e}(),H=X,z=["mov","clr","neg","not","li","nop","isodd","pmov","pnot","pset","pclr"],F=["add","addi","addl","sub","subi","subl","xor","xori","xorl","sl","sli","sll","sr","sri","srl","sra","srai","sral","nor","norl","shadd","shadd2","or","ori","orl","and","andi","andl"],V=["btest","btesti","cmpeq","cmpieq","cmple","cmpile","cmplt","cmpilt","cmpneq","cmpineq","cmpule","cmpiule","cmpult","cmpiult"],W=["lbc","lbl","lbm","lbs","lbuc","lbul","lbum","lbus","lhc","lhl","lhm","lhs","lhuc","lhul","lhum","lhus","lwc","lwl","lwm","lws"],G=["sbc","sbl","sbm","sbs","shc","shl","shm","shs","swc","swl","swm","sws"],J=["mul","mulu"],Z=["sens","sfree","sres","sspill","sspillr","sensr"],Y=["pand","por","pxor"],K=["callnd","call","brnd","br","brcfnd","brcf","trap","retnd","ret","xretnd","xret","callndr","callr","brndr","brr","brcfr","brcfndr"],Q=[].concat(z,F,V,W,G,J,Z,Y,["mts","mfs"],K,["bcopy"]),ee={MOV_RR:"add {1} = {2}, 0",CLR:"add {1} = r0, 0",NEG:"sub {1} = r0, {2}",NOT:"nor {1} = {2}, r0",LI_POS:"add {1} = r0, {2}",LI_NEG:"sub {1} = r0, {2}",NOP:"sub r0 = r0, 0",ISODD:"btest {1} = {2}, r0",MOV_PR:"cmpneq {1} = {2}, r0",PMOV:"por {1} = {2}, {2}",PNOT:"pxor {1} = {2}, p0",PSET:"por {1} = p0, p0",PCLR:"pxor {1} = p0, p0",MOV_RP:"bcopy {1} = r0, 0, {2}"},te=function(e){var t,r,s,a={bin:F.includes(e),comp:V.includes(e),load:W.includes(e),store:G.includes(e),mul:J.includes(e),stack:Z.includes(e),pred:Y.includes(e),cf:K.includes(e),p1:"mov"===e||"pmov"===e};for(t in s=Object.keys(a))if(a[r=s[t]])return r;return e},re=["r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","r10","r11","r12","r13","r14","r15","r16","r17","r18","r19","r20","r21","r22","r23","r24","r25","r26","r27","r28","r29","r30","r31"],se=[].concat(re,["p0","p1","p2","p3","p4","p5","p6","p7","!p0","!p1","!p2","!p3","!p4","!p5","!p6","!p7"],["s0","s1","s2","s3","s4","s5","s6","s7","s8","s9","s10","s11","s12","s13","s14","s15"]),ae={sl:"s2",sh:"s3",ss:"s5",st:"s6",srb:"s7",sro:"s8",sxb:"s9",sxo:"s10"},ne=function(){function e(){Object(c.a)(this,e),this.state=new H,this.history=[],this.bundles={},this.pending_branch=null,window.state=this.state}return Object(u.a)(e,[{key:"reset",value:function(){this.state.reset(),this.history=[],this.bundles={},this.pending_branch=null}},{key:"getPC",value:function(){return this.state.cpu.pc}},{key:"step",value:function(){var e=this.bundles[this.state.cpu.pc];return!!e&&(this.state.updateHistory(),2===e.length?this.dualIssue(e):this.execute(e[0].instruction),this.pending_branch&&this.handlePendingBranch(),!0)}},{key:"dualIssue",value:function(e){var t={},r=!0,s=!1,a=void 0;try{for(var n,i=e[0].ops[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var c=n.value;for(var u in se.includes(c)&&e[1].ops.includes(c)&&(t[c]={}),t)t[u].prev=this.state.reg[u];for(var l in this.execute(e[1].instruction),t)t[l].next=this.state.reg[l],t[l].prev!==t[l].next&&(this.state.reg[l]=t[l].prev);for(var o in this.execute(e[0].instruction),t)this.state.reg[o]=t[o].next}}catch(p){s=!0,a=p}finally{try{r||null==i.return||i.return()}finally{if(s)throw a}}for(var h in this.execute(e[1].instruction),t)this.state.reg[h]=t[h].next}},{key:"handlePendingBranch",value:function(){0!==this.pending_branch.delay?this.pending_branch.delay--:("br"===this.pending_branch.inst.name?this.state.cpu.pc=this.pending_branch.pc:this.state.cpu.pc-=4,this.pending_branch.inst.execute(this.state),this.pending_branch=null)}},{key:"prev",value:function(){this.state.rewindOnce()}},{key:"run",value:function(){for(console.time("Execution time");this.bundles[this.state.cpu.pc];)this.step();console.timeEnd("Execution time")}},{key:"populate",value:function(e){this.reset();var t,r,s=!1,a=!0,n=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)if(r=(t=c.value).offset,t.is_data)switch(t.data.type){case"word":this.state.mem[r+3]=255&t.data.value,this.state.mem[r+2]=t.data.value>>8&255,this.state.mem[r+1]=t.data.value>>16&255,this.state.mem[r+0]=t.data.value>>24&255;break;default:return!1}else s||(this.state.cpu.base=r,this.state.cpu.pc=r,s=!0),this.bundles[r]=t.instructions,this.setMem(r,t)}catch(l){n=!0,i=l}finally{try{a||null==u.return||u.return()}finally{if(n)throw i}}return void 0!==t&&(this.state.mem.TEXT_END=Number(r)+t.size,!0)}},{key:"setMem",value:function(e,t){var r=0,s=!0,a=!1,n=void 0;try{for(var i,c=t.instructions[Symbol.iterator]();!(s=(i=c.next()).done);s=!0){var u=i.value,l=!0,o=!1,h=void 0;try{for(var p,m=u.instruction.binary[Symbol.iterator]();!(l=(p=m.next()).done);l=!0){var d=p.value;this.state.mem[e+r+3]=255&d,this.state.mem[e+r+2]=d>>8&255,this.state.mem[e+r+1]=d>>16&255,this.state.mem[e+r+0]=d>>24&255,r+=4}}catch(b){o=!0,h=b}finally{try{l||null==m.return||m.return()}finally{if(o)throw h}}}}catch(b){a=!0,n=b}finally{try{s||null==c.return||c.return()}finally{if(a)throw n}}}},{key:"execute",value:function(e){if((8&e.pred)>>>3!==this.state.reg["p".concat(7&e.pred)])if(!K.includes(e.name)||e.name.includes("nd"))e.execute(this.state);else{var t=0;switch(e.name){case"br":t=2;break;default:t=3}this.pending_branch={delay:t,inst:e,pc:this.state.cpu.pc},this.state.cpu.pc+=4}else K.includes(e.name)&&(this.state.cpu.pc+=4);F.includes(e.name)&&"l"===e.type?this.state.cpu.pc+=8:K.includes(e.name)||(this.state.cpu.pc+=4),this.setReadReg()}},{key:"getReg",value:function(){return this.state.getReg()}},{key:"getMem",value:function(){return this.state.getMemory()}},{key:"setReadReg",value:function(){this.state.reg.r0=0,this.state.reg.p0=1,this.state.reg.s0=0;for(var e=0;e<8;e++)this.state.reg.s0|=this.state.reg["p".concat(e)]<<e}}]),e}(),ie=function(){function e(t){var r=t.name,s=t.func,a=t.pred,n=t.rd,i=t.rs1,u=t.op2;switch(Object(c.a)(this,e),this.type=isNaN(u)?"r":Number(u)>4095?"l":"i",this.pred=a,this.rd=n,this.rs1=i,this.op2=u,this.name=r,this.func=s,[11,12,13].includes(s)&&"i"===this.type&&(this.type="l"),this.type){case"r":this.binary=function(e,t,r,s,a){var n=[0];return e=g(e),a=g(a),t=w(t),r=w(r),s=w(s),n[0]|=e<<27,n[0]|=8<<22,n[0]|=t<<17,n[0]|=r<<12,n[0]|=s<<7,n[0]|=a<<0,n}(a,n,i,u,s);break;case"i":this.op2&=4095,this.binary=function(e,t,r,s,a){var n=[0];return e=g(e),t=g(t),a=g(a),r=w(r),s=w(s),n[0]|=e<<27,n[0]|=(7&t)<<22,n[0]|=r<<17,n[0]|=s<<12,n[0]|=a<<0,n}(a,s,n,i,u);break;case"l":this.binary=function(e,t,r,s,a){var n=[0,0];return e=g(e),s=g(s),a=g(a),t=w(t),r=w(r),n[0]|=1<<31,n[0]|=e<<27,n[0]|=31<<22,n[0]|=t<<17,n[0]|=r<<12,n[0]|=s,n[1]=4294967295&a,n}(a,n,i,s,u);break;default:throw new Error("Unexpected type in ".concat(this.name))}}return Object(u.a)(e,[{key:"execute",value:function(){throw new Error("Missing execute handler for",this)}},{key:"toString",value:function(){return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," ").concat(this.rd," = ").concat(this.rs1,", ").concat(this.op2)}}]),e}(),ce=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"add",func:0,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=t[this.rs1]+("r"===this.type?t[this.op2]:Number(this.op2))|0}}]),t}(ie),ue=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"nor",func:11,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=~(t[this.rs1]|("r"===this.type?t[this.op2]:Number(this.op2))|0)}}]),t}(ie),le=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"shadd",func:12,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=(t[this.rs1]<<1)+("r"===this.type?t[this.op2]:Number(this.op2))|0}}]),t}(ie),oe=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"shadd2",func:13,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=(t[this.rs1]<<2)+("r"===this.type?t[this.op2]:Number(this.op2))|0}}]),t}(ie),he=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sl",func:3,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=t[this.rs1]<<("r"===this.type?31&t[this.op2]:31&Number(this.op2))|0}}]),t}(ie),pe=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sr",func:4,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=t[this.rs1]>>>("r"===this.type?31&t[this.op2]:31&Number(this.op2))|0}}]),t}(ie),me=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sra",func:5,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=t[this.rs1]>>("r"===this.type?31&t[this.op2]:31&Number(this.op2))|0}}]),t}(ie),de=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sub",func:1,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=t[this.rs1]-("r"===this.type?t[this.op2]:Number(this.op2))|0}}]),t}(ie),be=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"xor",func:2,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=t[this.rs1]^("r"===this.type?t[this.op2]:Number(this.op2))|0}}]),t}(ie),fe=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"or",func:6,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=t[this.rs1]|("r"===this.type?t[this.op2]:Number(this.op2))}}]),t}(ie),ve=function(e){function t(e){var r=e.pred,s=e.rd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"and",func:7,pred:r,rd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=t[this.rs1]&("r"===this.type?t[this.op2]:Number(this.op2))}}]),t}(ie),Oe=function(){function e(t){var r=t.name,s=t.pred,a=t.pd,n=t.rs1,i=t.op2,u=t.func;switch(Object(c.a)(this,e),this.type=isNaN(i)?"r":"i",this.pred=s,this.pd=a,this.rs1=n,this.op2=i,this.name=r,this.func=u,this.type){case"r":this.binary=function(e,t,r,s,a){var n=[0];return e=g(e),a=g(a),t=w(t),r=w(r),s=w(s),n[0]|=e<<27,n[0]|=8<<22,n[0]|=t<<17,n[0]|=r<<12,n[0]|=s<<7,n[0]|=48,n[0]|=a<<0,n}(s,a,n,i,u);break;case"i":this.op2&=31,this.binary=function(e,t,r,s,a){var n=[0];return e=g(e),a=g(a),s=g(s),t=w(t),r=w(r),n[0]|=e<<27,n[0]|=8<<22,n[0]|=t<<17,n[0]|=r<<12,n[0]|=(31&s)<<7,n[0]|=96,n[0]|=a<<0,n}(s,a,n,i,u);break;default:throw new Error("Unexpected type in ".concat(this.name))}}return Object(u.a)(e,[{key:"execute",value:function(){throw new Error("Missing execute handler for",this)}},{key:"toString",value:function(){return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," ").concat(this.pd," = ").concat(this.rs1,", ").concat(this.op2)}}]),e}(),je=function(e){function t(e){var r=e.pred,s=e.pd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"btest",func:6,pred:r,pd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.pd]=Number(0!==(t[this.rs1]&1<<("r"===this.type?t[this.op2]:31&Number(this.op2))))}}]),t}(Oe),ye=function(e){function t(e){var r=e.pred,s=e.pd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"cmpeq",func:0,pred:r,pd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.pd]=Number(t[this.rs1]===("r"===this.type?t[this.op2]:Number(this.op2)<<27>>27))}}]),t}(Oe),ke=function(e){function t(e){var r=e.pred,s=e.pd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"cmple",func:3,pred:r,pd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.pd]=Number(t[this.rs1]<=("r"===this.type?t[this.op2]:Number(this.op2)<<27>>27))}}]),t}(Oe),ge=function(e){function t(e){var r=e.pred,s=e.pd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"cmplt",func:2,pred:r,pd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.pd]=Number(t[this.rs1]<("r"===this.type?t[this.op2]:Number(this.op2)<<27>>27))}}]),t}(Oe),we=function(e){function t(e){var r=e.pred,s=e.pd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"cmpneq",func:1,pred:r,pd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.pd]=Number(t[this.rs1]!==("r"===this.type?t[this.op2]:Number(this.op2)<<27>>27))}}]),t}(Oe),xe=function(e){function t(e){var r=e.pred,s=e.pd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"cmpule",func:5,pred:r,pd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.pd]=Number(t[this.rs1]>>>0<=("r"===this.type?t[this.op2]:Number(this.op2))>>>0)}}]),t}(Oe),Ee=function(e){function t(e){var r=e.pred,s=e.pd,a=e.rs1,n=e.op2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"cmpult",func:4,pred:r,pd:s,rs1:a,op2:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.pd]=Number(t[this.rs1]>>>0<("r"===this.type?t[this.op2]:Number(this.op2))>>>0)}}]),t}(Oe),Ne=function(){function e(t){var r=t.name,s=t.pred,a=t.d,n=t.op,i=t.s1,u=t.s2;switch(Object(c.a)(this,e),this.type=i||u?isNaN(i)?u?"two_reg":"single_reg":"immediate":"implicit",this.name=r,this.pred=s,this.d=a,this.op=n,this.s1=i,this.s2=u,this.type){case"implicit":this.binary=function(e,t,r){var s=[0];return e=g(e),t=g(t),r=g(r),s[0]|=e<<27,s[0]|=12<<23,s[0]|=t<<22,s[0]|=0,s[0]|=r<<0,s}(this.pred,this.d,this.op);break;case"single_reg":this.binary=function(e,t,r,s){var a=[0];return e=g(e),t=g(t),r=g(r),s=w(s),a[0]|=e<<27,a[0]|=12<<23,a[0]|=t<<22,a[0]|=s<<12,a[0]|=4,a[0]|=r<<0,a}(this.pred,this.d,this.op,this.s1);break;case"two_reg":this.binary=function(e,t,r,s,a){var n=[0];return e=g(e),t=g(t),r=g(r),s=w(s),a=w(a),n[0]|=e<<27,n[0]|=12<<23,n[0]|=t<<22,n[0]|=s<<12,n[0]|=a<<7,n[0]|=8,n[0]|=r<<0,n}(this.pred,this.d,this.op,this.s1,this.s2);break;case"immediate":this.s1&=4194303,this.binary=function(e,t,r,s){var a=[0];return e=g(e),t=g(t),r=g(r),s=g(s),a[0]|=e<<27,a[0]|=2<<25,a[0]|=t<<23,a[0]|=r<<22,a[0]|=s<<0,a}(this.pred,this.op,this.d,this.s1),this.s1=Number(this.s1)<<10>>8;break;default:throw new Error("Unexpected type in ".concat(this.name))}}return Object(u.a)(e,[{key:"execute",value:function(){throw new Error("Missing execute handler for",this)}},{key:"toString",value:function(){var e=this.s1?isNaN(this.s1)?this.s1:this.s1>>2:"";return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," ").concat(e," ").concat(this.s2?", "+this.s2:"")}}]),e}(),Ce=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"br",d:1,op:1,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu,s="immediate"===this.type?this.s1:t[this.s1];r.pc="immediate"===this.type?r.pc+s:s}}]),t}(Ne),Se=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"brcf",d:1,op:2,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu,s="immediate"===this.type?this.s1:t[this.s1],a="two_reg"===this.type?t[this.s2]:0;r.base=s,r.pc=s+a}}]),t}(Ne),_e=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"brcfnd",d:0,op:2,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu,s="immediate"===this.type?this.s1:t[this.s1],a="two_reg"===this.type?t[this.s2]:0;r.base=s,r.pc=s+a}}]),t}(Ne),Me=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"brnd",d:0,op:1,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu,s="immediate"===this.type?this.s1:t[this.s1];r.pc="immediate"===this.type?r.pc+s:s}}]),t}(Ne),Re=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"call",d:1,op:0,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu,s="immediate"===this.type?this.s1:t[this.s1];t.s7=r.base,t.s8=r.pc,r.base=s,r.pc=s}}]),t}(Ne),Pe=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"callnd",d:0,op:0,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu,s="immediate"===this.type?this.s1:t[this.s1];t.s7=r.base,t.s8=r.pc,r.base=s,r.pc=s}}]),t}(Ne),$e=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"ret",d:1,op:0,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu;r.base=t.s7,r.pc=t.s8+4}}]),t}(Ne),De=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"retnd",d:0,op:0,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu;r.base=t.s7,r.pc=t.s8+4}}]),t}(Ne),Ue=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"trap",d:0,op:3,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu,s=4026597504+this.s1;t.s9=r.base,t.s10=r.pc,r.base=s,r.pc=s}}]),t}(Ne),Be=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"xret",d:1,op:1,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu;r.base=t.s9,r.pc=t.s10+4}}]),t}(Ne),Le=function(e){function t(e){var r=e.pred,s=e.s1,a=e.s2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"xretnd",d:0,op:1,pred:r,s1:s,s2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.cpu;r.base=t.s9,r.pc=t.s10+4}}]),t}(Ne),qe=function(){function e(t){var r=t.name,s=t.pred,a=t.rd,n=t.ra,i=t.type,u=t.imm;Object(c.a)(this,e),this.name=r,this.pred=s,this.rd=a,this.ra=n,this.type=i,this.imm=127&x(u),this.binary=function(e,t,r,s,a){var n=[0];return e=g(e),a=g(a),s=g(s),t=w(t),r=w(r),n[0]|=e<<27,n[0]|=10<<22,n[0]|=t<<17,n[0]|=r<<12,n[0]|=s<<7,n[0]|=a<<0,n}(s,a,n,i,u)}return Object(u.a)(e,[{key:"execute",value:function(){throw new Error("Missing execute handler for",this)}},{key:"toString",value:function(){return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," ").concat(this.rd," = [").concat(this.ra," + ").concat(this.imm,"]")}}]),e}(),Ie=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lws",pred:r,rd:s,ra:a,type:0,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<2),a=r[t.s6+s+0],n=r[t.s6+s+1],i=r[t.s6+s+2],c=r[t.s6+s+3];t[this.rd]=a<<24|n<<16|i<<8|c}}]),t}(qe),Te=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lwl",pred:r,rd:s,ra:a,type:1,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<2),a=r[s+0],n=r[s+1],i=r[s+2],c=r[s+3];t[this.rd]=a<<24|n<<16|i<<8|c}}]),t}(qe),Ae=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lwc",pred:r,rd:s,ra:a,type:2,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<2),a=r[s+0],n=r[s+1],i=r[s+2],c=r[s+3];t[this.rd]=a<<24|n<<16|i<<8|c}}]),t}(qe),Xe=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lwm",pred:r,rd:s,ra:a,type:3,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<2),a=r[s+0],n=r[s+1],i=r[s+2],c=r[s+3];t[this.rd]=a<<24|n<<16|i<<8|c}}]),t}(qe),He=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lhs",pred:r,rd:s,ra:a,type:4,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1),a=r[t.s6+s+0],n=r[t.s6+s+1];t[this.rd]=(a<<8|n)<<16>>16}}]),t}(qe),ze=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lhl",pred:r,rd:s,ra:a,type:5,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1),a=r[s+0],n=r[s+1];t[this.rd]=(a<<8|n)<<16>>16}}]),t}(qe),Fe=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lhc",pred:r,rd:s,ra:a,type:6,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1),a=r[s+0],n=r[s+1];t[this.rd]=(a<<8|n)<<16>>16}}]),t}(qe),Ve=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lhm",pred:r,rd:s,ra:a,type:7,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1),a=r[s+0],n=r[s+1];t[this.rd]=(a<<8|n)<<16>>16}}]),t}(qe),We=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lbs",pred:r,rd:s,ra:a,type:8,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem;t[this.rd]=r[t.s6+t[this.ra]+this.imm]<<24>>24}}]),t}(qe),Ge=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lbl",pred:r,rd:s,ra:a,type:9,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem;t[this.rd]=r[t[this.ra]+this.imm]<<24>>24}}]),t}(qe),Je=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lbc",pred:r,rd:s,ra:a,type:10,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem;t[this.rd]=r[t[this.ra]+this.imm]<<24>>24}}]),t}(qe),Ze=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lbm",pred:r,rd:s,ra:a,type:11,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem;t[this.rd]=r[t[this.ra]+this.imm]<<24>>24}}]),t}(qe),Ye=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lhus",pred:r,rd:s,ra:a,type:12,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1),a=r[t.s6+s+0],n=r[t.s6+s+1];t[this.rd]=a<<8|n}}]),t}(qe),Ke=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lhul",pred:r,rd:s,ra:a,type:13,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1),a=r[s+0],n=r[s+1];t[this.rd]=a<<8|n}}]),t}(qe),Qe=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lhuc",pred:r,rd:s,ra:a,type:14,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1),a=r[s+0],n=r[s+1];t[this.rd]=a<<8|n}}]),t}(qe),et=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lhum",pred:r,rd:s,ra:a,type:15,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1),a=r[s+0],n=r[s+1];t[this.rd]=a<<8|n}}]),t}(qe),tt=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lbus",pred:r,rd:s,ra:a,type:16,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem;t[this.rd]=255&r[t.s6+t[this.ra]+this.imm]}}]),t}(qe),rt=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lbul",pred:r,rd:s,ra:a,type:17,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem;t[this.rd]=255&r[t[this.ra]+this.imm]}}]),t}(qe),st=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lbuc",pred:r,rd:s,ra:a,type:18,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem;t[this.rd]=255&r[t[this.ra]+this.imm]}}]),t}(qe),at=function(e){function t(e){var r=e.pred,s=e.rd,a=e.ra,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"lbum",pred:r,rd:s,ra:a,type:19,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem;t[this.rd]=255&r[t[this.ra]+this.imm]}}]),t}(qe),nt=function(){function e(t){var r=t.name,s=t.pred,a=t.rs1,n=t.rs2,i=t.func;Object(c.a)(this,e),this.name=r,this.pred=s,this.rs1=a,this.rs2=n,this.func=i,this.binary=function(e,t,r,s){var a=[0];return e=g(e),s=g(s),t=w(t),r=w(r),a[0]|=e<<27,a[0]|=8<<22,a[0]|=t<<12,a[0]|=r<<7,a[0]|=32,a[0]|=s<<0,a}(s,a,n,i)}return Object(u.a)(e,[{key:"execute",value:function(){throw new Error("Missing execute handler for",this)}},{key:"toString",value:function(){return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," ").concat(this.rs1,", ").concat(this.rs2)}}]),e}(),it=function(e){function t(e){var r=e.pred,s=e.rs1,a=e.rs2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"mul",func:0,pred:r,rs1:s,rs2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t.s2=Math.imul(t[this.rs1],t[this.rs2]),t.s3=t[this.rs1]*t[this.rs2]/Math.pow(2,32)|0}}]),t}(nt),ct=function(e){function t(e){var r=e.pred,s=e.rs1,a=e.rs2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"mulu",func:1,pred:r,rs1:s,rs2:a}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t.s2=Math.imul(t[this.rs1],t[this.rs2]),t.s3=(t[this.rs1]>>>0)*(t[this.rs2]>>>0)/Math.pow(2,32)>>>0}}]),t}(nt),ut=function(){function e(t){var r=t.name,s=t.pred,a=t.pd,n=t.ps1,i=t.ps2,u=t.func;Object(c.a)(this,e),this.name=r,this.pred=s,this.pd=a,this.neg1="!"===n[0],this.neg2="!"===i[0],this.ps1=n.replace("!",""),this.ps2=i.replace("!",""),this.func=u,this.binary=function(e,t,r,s,a){var n=[0];return e=g(e),a=g(a),t=w(t),r="!"===r[0]?8|w(r):w(r),s="!"===s[0]?8|w(s):w(s),n[0]|=e<<27,n[0]|=8<<22,n[0]|=t<<17,n[0]|=r<<12,n[0]|=s<<7,n[0]|=64,n[0]|=a<<0,n}(s,a,n,i,u)}return Object(u.a)(e,[{key:"execute",value:function(){console.error("Missing execute handler for",this)}},{key:"toString",value:function(){return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," ").concat(this.pd," = ").concat(this.neg1?"!":"").concat(this.ps1,", ").concat(this.neg2?"!":"").concat(this.ps2)}}]),e}(),lt=function(e){function t(e){var r=e.pred,s=e.pd,a=e.ps1,n=e.ps2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"pand",pred:r,pd:s,ps1:a,ps2:n,func:7}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.pd]=(this.neg1?~t[this.ps1]:t[this.ps1])&(this.neg2?~t[this.ps2]:t[this.ps2])&1}}]),t}(ut),ot=function(e){function t(e){var r=e.pred,s=e.pd,a=e.ps1,n=e.ps2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"pxor",pred:r,pd:s,ps1:a,ps2:n,func:10}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.pd]=1&((this.neg1?~t[this.ps1]:t[this.ps1])^(this.neg2?~t[this.ps2]:t[this.ps2]))}}]),t}(ut),ht=function(e){function t(e){var r=e.pred,s=e.pd,a=e.ps1,n=e.ps2;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"por",pred:r,pd:s,ps1:a,ps2:n,func:6}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t[this.pd]=1&((this.neg1?~t[this.ps1]:t[this.ps1])|(this.neg2?~t[this.ps2]:t[this.ps2]))}}]),t}(ut),pt=function(){function e(t){var r=t.name,s=t.pred,a=t.op,n=t.s1;Object(c.a)(this,e),this.type=isNaN(n)?"r":"i",this.name=r,this.pred=s,this.op=a,this.s1=n,"r"===this.type?this.binary=function(e,t,r){var s=[0];return e=g(e),t=g(t),r=w(r),s[0]|=e<<27,s[0]|=12<<22,s[0]|=t<<20,s[0]|=1<<18,s[0]|=r<<12,s}(s,a,n):(this.s1&=262143,this.binary=function(e,t,r){var s=[0];return e=g(e),t=g(t),r=g(r),s[0]|=e<<27,s[0]|=12<<22,s[0]|=t<<20,s[0]|=0,s[0]|=r<<0,s}(s,a,n))}return Object(u.a)(e,[{key:"execute",value:function(){throw new Error("No execute handler")}},{key:"toString",value:function(){return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," ").concat(this.s1)}}]),e}(),mt=function(e){function t(e){var r=e.pred,s=e.s1;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sens",pred:r,op:1,s1:s}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=Number("r"===this.type?t[this.s1]:this.s1<<2);t.s5=Math.max(t.s5,t.s6+r)}}]),t}(pt),dt=function(e){function t(e){var r=e.pred,s=e.s1;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sfree",pred:r,op:2,s1:s}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;t.s6+=Number(this.s1)<<2,t.s6>t.s5&&(t.s5=t.s6)}}]),t}(pt),bt=function(e){function t(e){var r=e.pred,s=e.s1;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sres",pred:r,op:0,s1:s}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){e.reg.s6-=Number(this.s1)<<2}}]),t}(pt),ft=function(e){function t(e){var r=e.pred,s=e.s1;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sspill",pred:r,op:3,s1:s}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=Number("r"===this.type?t[this.s1]:this.s1<<2);t.s5-=r}}]),t}(pt),vt=function(){function e(t){var r=t.name,s=t.pred,a=t.type,n=t.ra,i=t.rs,u=t.imm;Object(c.a)(this,e),this.name=r,this.pred=s,this.type=a,this.ra=n,this.rs=i,this.imm=127&x(u),this.binary=function(e,t,r,s,a){var n=[0];return e=g(e),t=g(t),r=w(r),s=w(s),a=g(a),n[0]|=e<<27,n[0]|=11<<22,n[0]|=t<<17,n[0]|=r<<12,n[0]|=s<<7,n[0]|=a<<0,n}(s,a,n,i,u)}return Object(u.a)(e,[{key:"execute",value:function(){throw new Error("Missing execute handler for",this)}},{key:"toString",value:function(){return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," [").concat(this.ra," + ").concat(this.imm,"] = ").concat(this.rs)}}]),e}(),Ot=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sbc",pred:r,type:10,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;e.mem[t[this.ra]+this.imm]=255&t[this.rs]}}]),t}(vt),jt=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sbl",pred:r,type:9,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;e.mem[t[this.ra]+this.imm]=255&t[this.rs]}}]),t}(vt),yt=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sbm",pred:r,type:11,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;e.mem[t[this.ra]+this.imm]=255&t[this.rs]}}]),t}(vt),kt=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sbs",pred:r,type:8,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg;e.mem[t.s6+t[this.ra]+this.imm]=255&t[this.rs]}}]),t}(vt),gt=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"shc",pred:r,type:6,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1);r[s+0]=t[this.rs]>>8&255,r[s+1]=255&t[this.rs]}}]),t}(vt),wt=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"shl",pred:r,type:5,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1);r[s+0]=t[this.rs]>>8&255,r[s+1]=255&t[this.rs]}}]),t}(vt),xt=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"shm",pred:r,type:7,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<1);r[s+0]=t[this.rs]>>8&255,r[s+1]=255&t[this.rs]}}]),t}(vt),Et=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"shs",pred:r,type:4,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t.s6+t[this.ra]+(this.imm<<1);r[s+0]=t[this.rs]>>8&255,r[s+1]=255&t[this.rs]}}]),t}(vt),Nt=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"swc",pred:r,type:2,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<2);r[s+0]=t[this.rs]>>24&255,r[s+1]=t[this.rs]>>16&255,r[s+2]=t[this.rs]>>8&255,r[s+3]=255&t[this.rs]}}]),t}(vt),Ct=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"swl",pred:r,type:1,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<2);r[s+0]=t[this.rs]>>24&255,r[s+1]=t[this.rs]>>16&255,r[s+2]=t[this.rs]>>8&255,r[s+3]=255&t[this.rs]}}]),t}(vt),St=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"swm",pred:r,type:3,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t[this.ra]+(this.imm<<2);r[s+0]=t[this.rs]>>24&255,r[s+1]=t[this.rs]>>16&255,r[s+2]=t[this.rs]>>8&255,r[s+3]=255&t[this.rs]}}]),t}(vt),_t=function(e){function t(e){var r=e.pred,s=e.ra,a=e.rs,n=e.imm;return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).call(this,{name:"sws",pred:r,type:0,ra:s,rs:a,imm:n}))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(e){var t=e.reg,r=e.mem,s=t.s6+t[this.ra]+(this.imm<<2);r[s+0]=t[this.rs]>>24&255,r[s+1]=t[this.rs]>>16&255,r[s+2]=t[this.rs]>>8&255,r[s+3]=255&t[this.rs]}}]),t}(vt),Mt=function(){function e(t){var r=t.pred,s=t.rd,a=t.rs1,n=t.imm,i=t.ps;Object(c.a)(this,e),this.name="bcopy",this.pred=r,this.rd=s,this.rs1=a,this.imm=31&n,this.ps=i,this.binary=function(e,t,r,s,a){var n=[0];return e=g(e),s=g(s),t=w(t),r=w(r),a="!"===a[0]?8|w(a):w(a),n[0]|=e<<27,n[0]|=8<<22,n[0]|=t<<17,n[0]|=r<<12,n[0]|=s<<7,n[0]|=80,n[0]|=a<<0,n}(r,s,a,n,i)}return Object(u.a)(e,[{key:"execute",value:function(e){var t=e.reg,r="!"===this.ps[0]===(1===t[this.ps.replace("!","")])?0:1;t[this.rd]=t[this.rs1]&~(1<<this.imm)|r<<this.imm}},{key:"toString",value:function(){return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," ").concat(this.rd," = ").concat(this.rs1,", ").concat(this.imm,", ").concat(this.ps)}}]),e}(),Rt=function(){function e(t){var r=t.pred,s=t.rd,a=t.ss;Object(c.a)(this,e),this.name="mfs",this.pred=r,this.rd=s,this.ss=a,this.binary=function(e,t,r){var s=[0];return e=g(e),t=w(t),r=w(r),s[0]|=e<<27,s[0]|=9<<22,s[0]|=t<<17,s[0]|=48,s[0]|=r<<0,s}(r,s,a)}return Object(u.a)(e,[{key:"execute",value:function(e){var t=e.reg;t[this.rd]=t[this.ss]}},{key:"toString",value:function(){return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," ").concat(this.rd," = ").concat(this.ss)}}]),e}(),Pt=function(){function e(t){var r=t.pred,s=t.rs1,a=t.sd;Object(c.a)(this,e),this.name="mts",this.pred=r,this.rs1=s,this.sd=a,this.binary=function(e,t,r){var s=[0];return e=g(e),t=w(t),r=w(r),s[0]|=e<<27,s[0]|=9<<22,s[0]|=t<<12,s[0]|=32,s[0]|=r<<0,s}(r,s,a)}return Object(u.a)(e,[{key:"execute",value:function(e){var t=e.reg;t[this.sd]=t[this.rs1],"s0"===this.sd&&(t[this.sd]&=255,t.p0=1,t.p1=t.s0>>1,t.p2=t.s0>>2,t.p3=t.s0>>3,t.p4=t.s0>>4,t.p5=t.s0>>5,t.p6=t.s0>>6,t.p7=t.s0>>7)}},{key:"toString",value:function(){return"".concat(this.pred?"(".concat(8&this.pred?"!":"","p").concat(7&this.pred,") "):"").concat(this.name," ").concat(this.sd," = ").concat(this.rs1)}}]),e}(),$t={first:[/^(?!#)(?:(\w+):\s*)?(?:\((!?)(p\d)\)\s+)?(\w+)\s*/i,"label: (ps) type"],bin:[/^(r\d{1,2})\s*=\s*(r\d{1,2})\s*,\s*\(?([^()\s]+)\)?$/i,"rd = rs1, op2"],comp:[/^(p\d)\s*=\s*(r\d{1,2})\s*,\s*(r?(?:0x)?(?:0b)?\d+)$/i,"pd = rs1, op2"],load:[/^(r\d{1,2})\s*=\s*\[(r\d{1,2})\s*\+\s*(\w+)\]$/i,"rd = [rs + imm]"],store:[/^\[(r\d{1,2})\s*\+\s*((?:0x)?(?:0b)?\d+)\]\s*=\s*(r\d{1,2})$/i,"[rd + imm] = rs"],mul:[/^(r\d{1,2})\s*,\s*(r\d{1,2})$/i,"rs1, rs2"],stack:[/^(r?(?:0x)?(?:0b)?\d+)\s?$/i,"op2"],pred:[/^(p\d)\s*=\s*(!?p\d)\s*,\s*(!?p\d)$/i,"pd = ps1, ps2"],cf:[/^\s*(-?\w*),?\s*(\w*)$/i,"label"],mts:[/^(sro|srb|sxo|sxb|sl|sh|ss|st|s\d{1,2})\s*=\s*(r\d{1,2})$/i,"sd = rs"],mfs:[/^(r\d{1,2})\s*=\s*(sro|srb|sxo|sxb|sl|sh|ss|st|s\d{1,2})$/i,"rd = ss"],bcopy:[/^(r\d{1,2})\s*=\s*(r\d{1,2}),\s*((?:0x)?(?:0b)?\d+),\s*(!?p\d)$/i,"rd = rs, imm, [!]ps"],p1:[/^([rp]\d{1,2})\s*=\s*([rp]\d{1,2})$/i,"mov, isodd, pmov"],mov:[/ /i,""],pmov:[/ /i,""],isodd:[/^(p\d)\s*=\s*(r\d{1,2})$/i,"pd = rd"],clr:[/^([rp]\d{1,2})$/i,"rd/pd"],neg:[/^(r\d{1,2})\s*=\s*-\s*(r\d{1,2})$/i,"rd = -rs"],not:[/^(r\d{1,2})\s*=\s*!\s*(r\d{1,2})$/i,"rd = !rs"],li:[/^(r\d{1,2})\s*=\s*(\(?([^()\s]+)\)?)$/i,"rd = imm"],nop:[/^\s*$/i,"nop"],pset:[/^(p\d)\s*=\s*1$/i,"pd = 1"],pnot:[/^(p\d)\s*=\s*!\s*(p\d)$/i,"pd = !ps"],pclr:[/^(p\d)\s*=\s*(0)$/i,"pd = 0"]},Dt=function(e){return void 0===$t[te(e)]?-1:$t[te(e)][0]},Ut=function(e){return void 0===$t[te(e)]?-1:"Instruction ".concat(e," should be on form: ").concat($t[te(e)][1])},Bt=function(){function e(){var t=this;Object(c.a)(this,e),this.cleanInput=function(e){for(var r=e.replace(/~/gi,"!").split(/(?:\r?\n)/),s=[],a=0;a<r.length;++a)for(var n=r[a].split("#",1)[0].trim(),i=n.split(";"),c=0;c<i.length;++c){var u=i[c].match(/^\w+:$/);n&&(u&&a+1<r.length?r[a+1]=u[0]+" "+r[a+1]:!u&&i[c]&&s.push(i[c]),t.numMap[s.length-1]=a+1)}return s},this.bundles=[],this.labels={},this.offset=0,this.error=[],this.numMap=[]}return Object(u.a)(e,[{key:"reset",value:function(){this.bundles=[],this.labels={},this.offset=0,this.error=[],this.numMap=[]}},{key:"run",value:function(e){this.reset();var t=this.cleanInput(e),r=!0,s=!1,a=void 0;try{for(var n,i=t[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var c=n.value;this.parse(c)}}catch(d){s=!0,a=d}finally{try{r||null==i.return||i.return()}finally{if(s)throw a}}var u=!0,l=!1,o=void 0;try{for(var h,p=this.bundles[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;this.resolveOperands(m)&&this.compileBundle(m)}}catch(d){l=!0,o=d}finally{try{u||null==p.return||p.return()}finally{if(l)throw o}}return this.checkErr()}},{key:"checkErr",value:function(){for(var e in this.error)if("fine"!==this.error[e])return!1;return this.error=[],!0}},{key:"parse",value:function(e){var t=this;if(/^\s*$/i.test(e))return!0;var r=e.split("||"),s={is_data:!1,data:null,offset:this.offset,instructions:[],size:0},a=this.bundles.push(s)-1,n=e.match(/^(?:(\w+):)?(?:\s+)?\.word\s+([^\s]+)$/i);if(n)return s.is_data=!0,s.data={type:"word",value:n[2]},n[1]&&(this.labels[n[1]]=a),this.offset+=4,!0;if(r.length>2)return this.error[a]="Only two instructions per bundle allowed!",!1;var i=function(e){var n=r[e],i=(n=n.trim()).match(Dt("first"));if(!i)return t.error[a]=Ut("first"),{v:!1};var c=i[1],u="!"===i[2],l=i[3]?Number(i[3].toLowerCase().replace("p","")):0,o=i[4].toLowerCase();if("halt"===o&&(o="nop"),i=n.replace(i[0],"").match(Dt(o)),!Q.includes(o))return t.error[a]="".concat(o," is not an instruction"),{v:!1};if(!i)return t.error[a]=Ut(o),{v:!1};if(z.includes(o)){var h=o.toUpperCase();switch(h){case"LI":Number(i[2]<0)?(h="LI_NEG",i[2]=-i[2]):h="LI_POS";break;case"MOV":h+=re.includes(i[1])?"_R":"_P",h+=re.includes(i[2])?"R":"P"}var p=ee[h].replace(/{(\d+)}/g,(function(e,t){return i[t]}));o=(i=p.match(Dt("first")))[4].toLowerCase(),i=p.replace(i[0],"").match(Dt(o))}var m={pred:{p:l,n:u},type:o,ops:i.slice(1),original:n.replace(/\s+/gi," ")},d=F.includes(o)&&Number(m.ops[2])&&(Number(m.ops[2])>4095||["nor","shadd","shadd2"].includes(o));if(2===r.length){if(d)return t.error[a]="Can't bundle a 64-bit instruction with anything else",{v:!1};if(1===e&&!function(e){return F.includes(e)||V.includes(e)}(o))return t.error[a]="".concat(o," can't run in pipeline two."),{v:!1}}c&&(t.labels[c]=a),s.instructions.push(m),s.size+=d?8:4};for(var c in r){var u=i(c);if("object"===typeof u)return u.v}return this.offset+=s.size,!0}},{key:"resolveOperands",value:function(e){var t=e.offset/4;if(e.is_data){var r=e.data.value.match(/^(\S+)([+-])(\S+)$/i);if(Object.keys(this.labels).includes(e.data.value))e.data.value=this.bundles[this.labels[e.data.value]].offset;else if(r&&Object.keys(this.labels).includes(r[1])&&Object.keys(this.labels).includes(r[3])){var s=this.bundles[this.labels[r[1]]].offset,a=this.bundles[this.labels[r[3]]].offset;e.data.value="+"===r[2]?s+a:s-a}else e.data.value=Number(e.data.value)}var n=!0,i=!1,c=void 0;try{for(var u,l=e.instructions[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var o=u.value;for(var h in o.ops){var p=o.ops[h],m=p.toLowerCase(),d=p.match(/^(\S+)([+-])(\S+)$/i);if(ae[m])o.ops[h]=ae[m];else if(se.includes(m))o.ops[h]=m;else if(Object.keys(this.labels).includes(p)||d&&Object.keys(this.labels).includes(d[1])&&Object.keys(this.labels).includes(d[3])){var b=void 0;if(d){var f=this.bundles[this.labels[d[1]]].offset,v=this.bundles[this.labels[d[3]]].offset;b="+"===d[2]?f+v:f-v}else b=this.bundles[this.labels[p]].offset;if(K.includes(o.type))["br","brnd"].includes(o.type)?o.ops[h]=String(b-e.offset>>2):o.ops[h]=String(b>>2);else if(W.includes(o.type)){var O=0;o.type.includes("w")?O=2:o.type.includes("h")&&(O=1),o.ops[h]=String(b>>O)}else o.ops[h]=String(b)}else if(isNaN(p))return this.error[t]="Can't resolve operands",!1}}}catch(j){i=!0,c=j}finally{try{n||null==l.return||l.return()}finally{if(i)throw c}}return!0}},{key:"compileBundle",value:function(e){for(var t in e.instructions){var r=void 0,s=e.instructions[t],a=s.pred,n=s.type,i=s.ops,c=a.p|a.n<<3,u={pred:c,rd:i[0],rs1:i[1],op2:i[2]},l={pred:c,pd:i[0],rs1:i[1],op2:i[2]},o={pred:c,s1:i[0],s2:i[1]},h={pred:c,rd:i[0],ra:i[1],imm:i[2]},p={pred:c,rs1:i[0],rs2:i[1]},m={pred:c,pd:i[0],ps1:i[1],ps2:i[2]},d={pred:c,s1:i[0]},b={pred:c,ra:i[0],imm:i[1],rs:i[2]},f={pred:c,rd:i[0],rs1:i[1],imm:i[2],ps:i[3]};switch(n){case"add":case"addi":case"addl":r=new ce(u);break;case"sub":case"subi":case"subl":r=new de(u);break;case"or":case"ori":case"orl":r=new fe(u);break;case"and":case"andi":case"andl":r=new ve(u);break;case"xor":case"xori":case"xorl":r=new be(u);break;case"nor":case"norl":r=new ue(u);break;case"sl":case"sli":case"sll":r=new he(u);break;case"sr":case"sri":case"srl":r=new pe(u);break;case"sra":case"srai":case"sral":r=new me(u);break;case"shadd":r=new le(u);break;case"shadd2":r=new oe(u);break;case"btest":case"btesti":r=new je(l);break;case"cmpeq":case"cmpieq":r=new ye(l);break;case"cmple":case"cmpile":r=new ke(l);break;case"cmplt":case"cmpilt":r=new ge(l);break;case"cmpneq":case"cmpineq":r=new we(l);break;case"cmpule":case"cmpiule":r=new xe(l);break;case"cmpult":case"cmpiult":r=new Ee(l);break;case"lbc":r=new Je(h);break;case"lbl":r=new Ge(h);break;case"lbm":r=new Ze(h);break;case"lbs":r=new We(h);break;case"lbuc":r=new st(h);break;case"lbul":r=new rt(h);break;case"lbum":r=new at(h);break;case"lbus":r=new tt(h);break;case"lhc":r=new Fe(h);break;case"lhl":r=new ze(h);break;case"lhm":r=new Ve(h);break;case"lhs":r=new He(h);break;case"lhuc":r=new Qe(h);break;case"lhul":r=new Ke(h);break;case"lhum":r=new et(h);break;case"lhus":r=new Ye(h);break;case"lwc":r=new Ae(h);break;case"lwl":r=new Te(h);break;case"lwm":r=new Xe(h);break;case"lws":r=new Ie(h);break;case"mul":r=new it(p);break;case"mulu":r=new ct(p);break;case"pand":r=new lt(m);break;case"por":r=new ht(m);break;case"pxor":r=new ot(m);break;case"sbc":r=new Ot(b);break;case"sbl":r=new jt(b);break;case"sbm":r=new yt(b);break;case"sbs":r=new kt(b);break;case"shc":r=new gt(b);break;case"shl":r=new wt(b);break;case"shm":r=new xt(b);break;case"shs":r=new Et(b);break;case"swc":r=new Nt(b);break;case"swl":r=new Ct(b);break;case"swm":r=new St(b);break;case"sws":r=new _t(b);break;case"sens":case"sensr":r=new mt(d);break;case"sfree":r=new dt(d);break;case"sres":r=new bt(d);break;case"sspill":case"sspillr":r=new ft(d);break;case"br":case"brr":r=new Ce(o);break;case"brcf":case"brcfr":r=new Se(o);break;case"brcfnd":case"brcfndr":r=new _e(o);break;case"brnd":case"brndr":r=new Me(o);break;case"call":case"callr":r=new Re(o);break;case"callnd":case"callndr":r=new Pe(o);break;case"ret":r=new $e(o);break;case"retnd":r=new De(o);break;case"trap":r=new Ue(o);break;case"xret":r=new Be(o);break;case"xretnd":r=new Le(o);break;case"bcopy":r=new Mt(f);break;case"mfs":r=new Rt({pred:a.p|a.n<<3,rd:i[0],ss:i[1]});break;case"mts":r=new Pt({pred:a.p|a.n<<3,rs1:i[1],sd:i[0]});break;default:return console.log("Instruction ".concat(n," not implemented.")),-1}"halt"===e.instructions[t].original&&(r.binary[0]=88080384,r.toString=function(){return""}),0===Number(t)&&2===e.instructions.length&&(r.binary[0]|=1<<31),e.instructions[t].instruction=r;var v=e.offset/4;this.error[v]||(this.error[v]="fine")}}}]),e}(),Lt=function(e){function t(e){var r;return Object(c.a)(this,t),(r=Object(l.a)(this,Object(o.a)(t).call(this,e))).editorUpdate=function(e){console.clear(),console.log("Run Assembler"),r.a.run(e)&&(console.log("Assembler ran successfully"),r.cpu.populate(r.a.bundles)),r.forceUpdate()},r.stepBtn=function(){r.cpu.step(),r.forceUpdate()},r.runBtn=function(){r.cpu.run(),r.forceUpdate()},r.resetBtn=function(){r.cpu.populate(r.a.bundles),r.forceUpdate()},r.prevBtn=function(){r.cpu.prev(),r.forceUpdate()},r.dumpBtn=function(){for(var e=r.cpu.getMem(),t=new Uint8Array(e.TEXT_END),s=0;s<e.TEXT_END;s+=4)t[s]=e[s],t[s+1]=e[s+1],t[s+2]=e[s+2],t[s+3]=e[s+3];var a=new Blob([t],{type:"application/octet-stream"}),n=document.createElement("a"),i=URL.createObjectURL(a);n.href=i,n.download="chora.o",document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(i)}),0)},r.cpu=new ne,r.a=new Bt,r}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return document.body.style.overflowY="hidden",a.a.createElement("div",{className:"no-scroll"},a.a.createElement(A,{registers:this.cpu.getReg(),memory:this.cpu.getMem(),history:this.cpu.state.history,editorUpdate:this.editorUpdate,stepClick:this.stepBtn,runClick:this.runBtn,prevClick:this.prevBtn,resetClick:this.resetBtn,dumpClick:this.dumpBtn,pc:this.cpu.getPC(),bundles:this.cpu.bundles,error:this.a.error,numMap:this.a.numMap}))}}]),t}(s.Component);i.a.render(a.a.createElement(Lt,null),document.getElementById("root"))},8:function(e,t,r){}},[[15,1,2]]]);
//# sourceMappingURL=main.969166fe.chunk.js.map